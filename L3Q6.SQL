DECLARE
PID INVENT.ID%TYPE;
PNAME INVENT.NAME%TYPE;
PQ INVENT.QUANTITY%TYPE;
CURSOR INV IS SELECT * FROM INVENT;
BEGIN
 OPEN INV;
LOOP
   FETCH INV INTO PID,PNAME,PQ;
   EXIT WHEN INV%NOTFOUND;
   IF (PQ > 5) THEN
           INSERT INTO PUR_REC VALUES (PID,'PURCHASE',SYSDATE);
           UPDATE INVENT SET QUANTITY = PQ-2 WHERE ID = PID;
   ELSE
           INSERT INTO PUR_REC VALUES(PID,'OUTSTOCK',SYSDATE);
   END IF;
END LOOP;
END;




        ID STATUS     DAT
---------- ---------- ---------
         1 PURCHASE   13-SEP-22
         2 PURCHASE   13-SEP-22
         3 PURCHASE   13-SEP-22
         4 PURCHASE   13-SEP-22
         5 PURCHASE   13-SEP-22
         6 PURCHASE   13-SEP-22
         7 PURCHASE   13-SEP-22
         8 PURCHASE   13-SEP-22
         9 PURCHASE   13-SEP-22
        10 PURCHASE   13-SEP-22
         1 OUTSTOCK   13-SEP-22
         2 OUTSTOCK   13-SEP-22
         3 OUTSTOCK   13-SEP-22
         4 OUTSTOCK   13-SEP-22
         5 OUTSTOCK   13-SEP-22
         6 OUTSTOCK   13-SEP-22
         7 OUTSTOCK   13-SEP-22
         8 PURCHASE   13-SEP-22
         9 PURCHASE   13-SEP-22